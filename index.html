<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Main</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="stylesheet" href="main.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Indie+Flower|Lobster"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Noto+Sans+HK:wght@100;300;400;500;700;900&family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap"
    />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script
      src="https://kit.fontawesome.com/147b2895a5.js"
      crossorigin="anonymous"
    ></script>
  </head>

  <body id="body">
    <div id="toprow">
      <div id="topmiddle">
        <p id="title">WBC Differential Count</p>
        <p id="course">SP CLS BIOMEDICAL SCIENCE</p>
      </div>
    </div>

    <div class="rows">
      <div class="block1"></div>
      <div class="block2">
        <div class="imageDiv">
          <img class="image" id="neutrophil" src="neutrophil.png" />
        </div>
        <div class="left">NEUTROPHIL</div>
        <div class="right">
          <button
            type="button"
            class="minusbutton"
            onclick="minusNeu()"
            disabled
          >
            -
          </button>
          <audio id="clickSound" src="clicksound.mp3" preload="auto"></audio>
        </div>
        <div class="middle counter">
          <input
            type="text"
            id="counter1"
            class="count"
            min="0"
            max="99"
            value=""
            readonly
          />
        </div>
        <div class="right">
          <button type="button" class="addbutton" onclick="addNeu()" disabled>
            +
          </button>
          <audio id="clickSound" src="clicksound.mp3" preload="auto"></audio>
        </div>
      </div>
      <div class="block3"></div>
    </div>

    <div class="rows">
      <div class="block1"></div>
      <div class="block2">
        <div class="imageDiv">
          <img class="image" id="lymphocyte" src="lymphocyte.png" />
        </div>
        <div class="left">LYMPHOCYTE</div>
        <div class="right">
          <button
            type="button"
            class="minusbutton"
            onclick="minusLym()"
            disabled
          >
            -
          </button>
          <audio id="clickSound" src="clicksound.mp3" preload="auto"></audio>
        </div>
        <div class="middle counter">
          <input
            type="text"
            id="counter2"
            class="count"
            min="0"
            max="99"
            value=""
            readonly
          />
        </div>
        <div class="right">
          <button type="button" class="addbutton" onclick="addLym()" disabled>
            +
          </button>
          <audio id="clickSound" src="clicksound.mp3" preload="auto"></audio>
        </div>
      </div>
      <div class="block3"></div>
    </div>

    <div class="rows">
      <div class="block1"></div>
      <div class="block2">
        <div class="imageDiv">
          <img class="image" id="monocyte" src="monocyte.png" />
        </div>
        <div class="left">MONOCYTE</div>
        <div class="right">
          <button
            type="button"
            class="minusbutton"
            onclick="minusMon()"
            disabled
          >
            -
          </button>
          <audio id="clickSound" src="clicksound.mp3" preload="auto"></audio>
        </div>
        <div class="middle counter">
          <input
            type="text"
            id="counter3"
            class="count"
            min="0"
            max="99"
            value=""
            readonly
          />
        </div>
        <div class="right">
          <button type="button" class="addbutton" onclick="addMon()" disabled>
            +
          </button>
          <audio id="clickSound" src="clicksound.mp3" preload="auto"></audio>
        </div>
      </div>
      <div class="block3"></div>
    </div>

    <div class="rows">
      <div class="block1"></div>
      <div class="block2">
        <div class="imageDiv">
          <img class="image" id="eosinophil" src="eosinophil.png" />
        </div>
        <div class="left">EOSINOPHIL</div>
        <div class="right">
          <button
            type="button"
            class="minusbutton"
            onclick="minusEos()"
            disabled
          >
            -
          </button>
          <audio id="clickSound" src="clicksound.mp3" preload="auto"></audio>
        </div>
        <div class="middle counter">
          <input
            type="text"
            id="counter4"
            class="count"
            min="0"
            max="99"
            value=""
            readonly
          />
        </div>
        <div class="right">
          <button type="button" class="addbutton" onclick="addEos()" disabled>
            +
          </button>
          <audio id="clickSound" src="clicksound.mp3" preload="auto"></audio>
        </div>
      </div>
      <div class="block3"></div>
    </div>

    <div class="rows">
      <div class="block1"></div>
      <div class="block2">
        <div class="imageDiv">
          <img class="image" id="basophil" src="basophil.png" />
        </div>
        <div class="left">BASOPHIL</div>
        <div class="right">
          <button
            type="button"
            class="minusbutton"
            onclick="minusBas()"
            disabled
          >
            -
          </button>
          <audio id="clickSound" src="clicksound.mp3" preload="auto"></audio>
        </div>
        <div class="middle counter">
          <input
            type="text"
            id="counter5"
            class="count"
            min="0"
            max="99"
            value=""
            readonly
          />
        </div>
        <div class="right">
          <button type="button" class="addbutton" onclick="addBas()" disabled>
            +
          </button>
          <audio id="clickSound" src="clicksound.mp3" preload="auto"></audio>
        </div>
      </div>
      <div class="block3"></div>
    </div>

    <div class="rows" id="buttonrow1">
      <div class="block1"></div>
      <div class="block2">
        <button type="button" id="startbutton" onclick="start()">Start</button>
      </div>
      <div class="block3"></div>
    </div>

    <div class="rows" id="totalcountdiv" style="display: none">
      <p id="p2">Total count :</p>
      <input
        type="text"
        class="countTotal"
        id="totalCounter"
        min="0"
        max="100"
        value=""
        readonly
      />
      <button type="reset" id="resetbutton">Reset</button>
    </div>

    <div class="rows" id="buttonrow3" style="display: none">
      <div class="block1"></div>
      <div class="block2">
        <button type="button" id="acceptbutton1" onclick="accept1()">
          Accept
        </button>
        <button type="button" id="discardbutton1" onclick="discard1()">
          Discard
        </button>
      </div>
      <div class="block3"></div>
    </div>

    <div class="rows" id="buttonrow4" style="display: none">
      <div class="block1"></div>
      <div class="block2">
        <button type="button" id="acceptbutton2" onclick="accept2()">
          Accept
        </button>
        <button type="button" id="discardbutton2" onclick="discard2()">
          Discard
        </button>
      </div>
      <div class="block3"></div>
    </div>

    <div class="rows" id="instruction" style="display: none">
      <div class="block1"></div>
      <div class="block2">
        <p id="p3">(Press "Start" for count 2)</p>
      </div>
      <div class="block3"></div>
    </div>

    <div class="rows" id="count1div" style="display: none">
      <div class="block1"></div>
      <div class="block2">
        <table>
          <tbody>
            <tr>
              <td class="rowheadings" id="" readonly></td>
              <td class="headings" id="neu" readonly><label>Neu</label></td>
              <td class="headings" id="lym" readonly><label>Lym</label></td>
              <td class="headings" id="mon" readonly><label>Mon</label></td>
              <td class="headings" id="eos" readonly><label>Eos</label></td>
              <td class="headings" id="bas" readonly><label>Bas</label></td>
            </tr>
            <tr>
              <td class="rowheadings">Count 1</td>
              <td>
                <input type="text" class="abs" id="counter1row1" readonly />
              </td>
              <td>
                <input type="text" class="abs" id="counter2row1" readonly />
              </td>
              <td>
                <input type="text" class="abs" id="counter3row1" readonly />
              </td>
              <td>
                <input type="text" class="abs" id="counter4row1" readonly />
              </td>
              <td>
                <input type="text" class="abs" id="counter5row1" readonly />
              </td>
            </tr>
            <tr id="tablerow2" style="visibility: hidden">
              <td class="rowheadings">Count 2</td>
              <td>
                <input type="text" class="per" id="counter1row2" readonly />
              </td>
              <td>
                <input type="text" class="per" id="counter2row2" readonly />
              </td>
              <td>
                <input type="text" class="per" id="counter3row2" readonly />
              </td>
              <td>
                <input type="text" class="per" id="counter4row2" readonly />
              </td>
              <td>
                <input type="text" class="per" id="counter5row2" readonly />
              </td>
            </tr>

            <tr id="tablerow3" style="visibility: hidden">
              <td class="rowheadings">Avg/%</td>
              <td>
                <input type="text" class="per" id="counter1row3" readonly />
              </td>
              <td>
                <input type="text" class="per" id="counter2row3" readonly />
              </td>
              <td>
                <input type="text" class="per" id="counter3row3" readonly />
              </td>
              <td>
                <input type="text" class="per" id="counter4row3" readonly />
              </td>
              <td>
                <input type="text" class="per" id="counter5row3" readonly />
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="block3"></div>
    </div>

    <div class="rows" id="buttonrow5" style="display: none">
      <div class="block1"></div>
      <div class="block2">
        <button type="button" id="endbutton" onclick="end()">End</button>
      </div>
      <div class="block3"></div>
    </div>

    <div id="footer">
      <p id="copyright">
        &copy; <span id="trademark"></span> bigeyedog.studio
        <!-- <img
        src="bigeyedog.jpg"
        alt="bigeyedog"
        style="
          width: 16px;
          height: 16px;
          vertical-align: middle;
          border-radius: 50%;
        "
      /> -->
        All rights reserved.
      </p>
      <div class="tooltip-container">
        <button id="creditButton">Credits</button>
        <div class="tooltip-text">
          <p class="subtitle">
            Counting sound effect by
            <a
              href="https://pixabay.com/users/freesound_community-46691455/?utm_source=link-attribution&utm_medium=referral&utm_campaign=music&utm_content=88355"
              target="_blank"
            >
              freesound_community
            </a>
            from
            <a href="https://pixabay.com/" target="_blank">Pixabay</a>
          </p>
          <p class="subtitle">
            End of counting sound effect by
            <a
              href="https://pixabay.com/users/linhmitto-46708238/?utm_source=link-attribution&utm_medium=referral&utm_campaign=music&utm_content=254774"
              target="_blank"
            >
              linhmitto
            </a>
            from
            <a href="https://pixabay.com/sound-effects/" target="_blank"
              >Pixabay</a
            >
          </p>
          <p class="subtitle">
            Neutrophil figure
            <a
              href="https://imagebank.hematology.org/getimagebyid/3608?size=3"
              target="_blank"
              >https://imagebank.hematology.org/getimagebyid/3608?size=3</a
            >
          </p>
          <p class="subtitle">
            Lymphocyte figure
            <a
              href="https://medschool.co/images/detail/blood-film/lymphocytes-small-mature.jpg"
              target="_blank"
              >https://medschool.co/images/detail/blood-film/lymphocytes-small-mature.jpg</a
            >
          </p>
          <p class="subtitle">
            Monocyte figure
            <a
              href="https://vmicro.iusm.iu.edu/hs_vm/images/lab3_4b_mono.jpg"
              target="_blank"
              >https://vmicro.iusm.iu.edu/hs_vm/images/lab3_4b_mono.jpg</a
            >
          </p>
          <p class="subtitle">
            Eosinophil figure
            <a
              href="https://microanatomy.net/_Media/eosinophil4_med.png"
              target="_blank"
              >https://microanatomy.net/_Media/eosinophil4_med.png</a
            >
          </p>
          <p class="subtitle">
            Basophil figure
            <a
              href="https://i.pinimg.com/736x/a7/9a/41/a79a41a88de6491fdd1481c67564f342.jpg"
              target="_blank"
              >https://i.pinimg.com/736x/a7/9a/41/a79a41a88de6491fdd1481c67564f342.jpg</a
            >
          </p>
        </div>
      </div>
    </div>

    <script>
      const startYear = 2025; // Replace with your starting year
      const currentYear = new Date().getFullYear();
      const copyrightText =
        startYear === currentYear
          ? currentYear
          : `${startYear} - ${currentYear}`;
      document.getElementById("trademark").textContent = copyrightText;
    </script>

    <audio id="clickSound" src="clicksound.mp3" preload="auto"></audio>
    <audio id="dingSound" src="dingsound.mp3" preload="auto"></audio>

    <script>
      function addNeu() {
        if (parseInt(document.getElementById("totalCounter").value) < 99) {
          const clicksound = document.getElementById("clickSound");
          clicksound.currentTime = 0; // Rewind to the start
          clicksound.play();
        } else {
          const dingsound = document.getElementById("dingSound");
          dingsound.currentTime = 0; // Rewind to the start
          dingsound.play();
        }

        const currentValue = Number($("#counter1").val());
        const newValue = currentValue + 1;
        $("#counter1").val(newValue);

        totalCount();
        reach100();
      }

      function minusNeu() {
        if (parseInt(document.getElementById("totalCounter").value) < 99) {
          const clicksound = document.getElementById("clickSound");
          clicksound.currentTime = 0; // Rewind to the start
          clicksound.play();
        } else {
          const dingsound = document.getElementById("dingSound");
          dingsound.currentTime = 0; // Rewind to the start
          dingsound.play();
        }

        const currentValue = Number($("#counter1").val());
        if (currentValue == 0) {
          const newValue = currentValue;
        } else if (currentValue > 0) {
          const newValue = currentValue - 1;
          $("#counter1").val(newValue);
        }

        totalCount();
        reach100();
      }

      function addLym() {
        if (parseInt(document.getElementById("totalCounter").value) < 99) {
          const clicksound = document.getElementById("clickSound");
          clicksound.currentTime = 0; // Rewind to the start
          clicksound.play();
        } else {
          const dingsound = document.getElementById("dingSound");
          dingsound.currentTime = 0; // Rewind to the start
          dingsound.play();
        }

        const currentValue = Number($("#counter2").val());
        const newValue = currentValue + 1;
        $("#counter2").val(newValue);

        totalCount();
        reach100();
      }

      function minusLym() {
        if (parseInt(document.getElementById("totalCounter").value) < 99) {
          const clicksound = document.getElementById("clickSound");
          clicksound.currentTime = 0; // Rewind to the start
          clicksound.play();
        } else {
          const dingsound = document.getElementById("dingSound");
          dingsound.currentTime = 0; // Rewind to the start
          dingsound.play();
        }

        const currentValue = Number($("#counter2").val());
        if (currentValue == 0) {
          const newValue = currentValue;
        } else if (currentValue > 0) {
          const newValue = currentValue - 1;
          $("#counter2").val(newValue);
        }

        totalCount();
        reach100();
      }

      function addMon() {
        if (parseInt(document.getElementById("totalCounter").value) < 99) {
          const clicksound = document.getElementById("clickSound");
          clicksound.currentTime = 0; // Rewind to the start
          clicksound.play();
        } else {
          const dingsound = document.getElementById("dingSound");
          dingsound.currentTime = 0; // Rewind to the start
          dingsound.play();
        }

        const currentValue = Number($("#counter3").val());
        const newValue = currentValue + 1;
        $("#counter3").val(newValue);

        totalCount();
        reach100();
      }

      function minusMon() {
        if (parseInt(document.getElementById("totalCounter").value) < 99) {
          const clicksound = document.getElementById("clickSound");
          clicksound.currentTime = 0; // Rewind to the start
          clicksound.play();
        } else {
          const dingsound = document.getElementById("dingSound");
          dingsound.currentTime = 0; // Rewind to the start
          dingsound.play();
        }

        const currentValue = Number($("#counter3").val());
        if (currentValue == 0) {
          const newValue = currentValue;
        } else if (currentValue > 0) {
          const newValue = currentValue - 1;
          $("#counter3").val(newValue);
        }

        totalCount();
        reach100();
      }

      function addEos() {
        if (parseInt(document.getElementById("totalCounter").value) < 99) {
          const clicksound = document.getElementById("clickSound");
          clicksound.currentTime = 0; // Rewind to the start
          clicksound.play();
        } else {
          const dingsound = document.getElementById("dingSound");
          dingsound.currentTime = 0; // Rewind to the start
          dingsound.play();
        }

        const currentValue = Number($("#counter4").val());
        const newValue = currentValue + 1;
        $("#counter4").val(newValue);

        totalCount();
        reach100();
      }

      function minusEos() {
        if (parseInt(document.getElementById("totalCounter").value) < 99) {
          const clicksound = document.getElementById("clickSound");
          clicksound.currentTime = 0; // Rewind to the start
          clicksound.play();
        } else {
          const dingsound = document.getElementById("dingSound");
          dingsound.currentTime = 0; // Rewind to the start
          dingsound.play();
        }

        const currentValue = Number($("#counter4").val());
        if (currentValue == 0) {
          const newValue = currentValue;
        } else if (currentValue > 0) {
          const newValue = currentValue - 1;
          $("#counter4").val(newValue);
        }

        totalCount();
        reach100();
      }

      function addBas() {
        if (parseInt(document.getElementById("totalCounter").value) < 99) {
          const clicksound = document.getElementById("clickSound");
          clicksound.currentTime = 0; // Rewind to the start
          clicksound.play();
        } else {
          const dingsound = document.getElementById("dingSound");
          dingsound.currentTime = 0; // Rewind to the start
          dingsound.play();
        }

        const currentValue = Number($("#counter5").val());
        const newValue = currentValue + 1;
        $("#counter5").val(newValue);

        totalCount();
        reach100();
      }

      function minusBas() {
        if (parseInt(document.getElementById("totalCounter").value) < 99) {
          const clicksound = document.getElementById("clickSound");
          clicksound.currentTime = 0; // Rewind to the start
          clicksound.play();
        } else {
          const dingsound = document.getElementById("dingSound");
          dingsound.currentTime = 0; // Rewind to the start
          dingsound.play();
        }

        const currentValue = Number($("#counter5").val());
        if (currentValue == 0) {
          const newValue = currentValue;
        } else if (currentValue > 0) {
          const newValue = currentValue - 1;
          $("#counter5").val(newValue);
        }

        totalCount();
        reach100();
      }
    </script>

    <script>
      function totalCount() {
        const counter1value = Number($("#counter1").val());
        const counter2value = Number($("#counter2").val());
        const counter3value = Number($("#counter3").val());
        const counter4value = Number($("#counter4").val());
        const counter5value = Number($("#counter5").val());
        $("#totalCounter").val(
          counter1value +
            counter2value +
            counter3value +
            counter4value +
            counter5value
        );
      }

      function reach100() {
        if (Number(document.getElementById("totalCounter").value) === 100) {
          $(".addbutton, .minusbutton, #resetbutton").prop("disabled", true);
          const div = document.getElementById("count1div");
          if (div.style.display !== "none") {
            $("#buttonrow4").css("display", "flex");
          } else {
            $("#buttonrow3").css("display", "flex");
          }
        }
      }

      function accept1() {
        storeCount1();
        // populateTableData1();
        $("#count1div").css("display", "flex");
        $("#buttonrow3").css("display", "none");
        $("#buttonrow1").css("display", "flex");
        $("#instruction").css("display", "flex");
        $("#totalcountdiv").css("display", "none");
        $(".addbutton, .minusbutton").prop("disabled", true);
        $(
          "#counter1, #counter2, #counter3, #counter4, #counter5, #totalCounter"
        ).val("");
      }

      function accept2() {
        storeCount2();
        // populateTableData2();
        $("#count1div, #buttonrow5").css("display", "flex");
        $("#tablerow2, #tablerow3, #tablerow4").css("visibility", "visible");
        $("#buttonrow1, #buttonrow4, #totalcountdiv").css("display", "none");
        $(".addbutton, .minusbutton").prop("disabled", true);
        $(
          "#counter1, #counter2, #counter3, #counter4, #counter5, #totalCounter"
        ).val("");
      }

      function discard1() {
        $(
          "#counter1, #counter2, #counter3, #counter4, #counter5, #totalCounter"
        ).val(0);
        $("#buttonrow3").css("display", "none");
        $("#buttonrow2").css("display", "flex");
        $(".addbutton, .minusbutton, #resetbutton").prop("disabled", false);
      }

      function discard2() {
        $(
          "#counter1, #counter2, #counter3, #counter4, #counter5, #totalCounter"
        ).val(0);
        $("#buttonrow4").css("display", "none");
        $("#totalcountdiv").css("display", "flex");
        $(".addbutton, .minusbutton #resetbutton").prop("disabled", false);
      }
    </script>

    <script>
      function start() {
        $("#buttonrow1").css("display", "none");
        $("#totalcountdiv").css("display", "flex");
        $("#buttonrow2").css("display", "flex");
        $("#instruction").css("display", "none");
        $(".addbutton, .minusbutton, #resetbutton").prop("disabled", false);
        $(
          "#counter1, #counter2, #counter3, #counter4, #counter5, #totalCounter"
        ).val(0);
      }

      function end() {
        $("#buttonrow1").css("display", "flex");
        $("#buttonrow5, #count1div").css("display", "none");
        $("#tablerow2, #tablerow3").css("visibility", "hidden");
        $(".addbutton, .minusbutton").prop("disabled", true);
        $(
          "#counter1, #counter2, #counter3, #counter4, #counter5, #totalCounter"
        ).val("");

        $("#counter1row1").val("");
        $("#counter2row1").val("");
        $("#counter3row1").val("");
        $("#counter4row1").val("");
        $("#counter5row1").val("");
        $("#counter1row2").val("");
        $("#counter2row2").val("");
        $("#counter3row2").val("");
        $("#counter4row2").val("");
        $("#counter5row2").val("");
        $("#counter1row3").val("");
        $("#counter2row3").val("");
        $("#counter3row3").val("");
        $("#counter4row3").val("");
        $("#counter5row3").val("");
        // sessionStorage.clear();
      }
    </script>

    <script>
      function storeCount1() {
        const counter1value = Number($("#counter1").val());
        const counter2value = Number($("#counter2").val());
        const counter3value = Number($("#counter3").val());
        const counter4value = Number($("#counter4").val());
        const counter5value = Number($("#counter5").val());

        $("#counter1row1").val(counter1value);
        $("#counter2row1").val(counter2value);
        $("#counter3row1").val(counter3value);
        $("#counter4row1").val(counter4value);
        $("#counter5row1").val(counter5value);
      }

      function storeCount2() {
        const counter1value = Number($("#counter1").val());
        const counter2value = Number($("#counter2").val());
        const counter3value = Number($("#counter3").val());
        const counter4value = Number($("#counter4").val());
        const counter5value = Number($("#counter5").val());

        $("#counter1row2").val(counter1value);
        $("#counter2row2").val(counter2value);
        $("#counter3row2").val(counter3value);
        $("#counter4row2").val(counter4value);
        $("#counter5row2").val(counter5value);

        const neuAvg =
          (Number($("#counter1row1").val()) +
            Number($("#counter1row2").val())) /
          2;
        const lymAvg =
          (Number($("#counter2row1").val()) +
            Number($("#counter2row2").val())) /
          2;
        const monAvg =
          (Number($("#counter3row1").val()) +
            Number($("#counter3row2").val())) /
          2;
        const eosAvg =
          (Number($("#counter4row1").val()) +
            Number($("#counter4row2").val())) /
          2;
        const basAvg =
          (Number($("#counter5row1").val()) +
            Number($("#counter5row2").val())) /
          2;

        $("#counter1row3").val(neuAvg);
        $("#counter2row3").val(lymAvg);
        $("#counter3row3").val(monAvg);
        $("#counter4row3").val(eosAvg);
        $("#counter5row3").val(basAvg);
      }
    </script>

    <script>
      document
        .getElementById("resetbutton")
        .addEventListener("click", function () {
          $(
            "#counter1, #counter2, #counter3, #counter4, #counter5, #totalCounter"
          ).val(0);
        });
    </script>
  </body>
</html>
